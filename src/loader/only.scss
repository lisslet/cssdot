@import './variables';

@mixin loader-rule() {
  $box-size: 1.5em;
  $border-size: 0.25em;
  $content-size: $box-size - ($border-size * 2);
  $radius-size: 50%;
  $color: lighten(#000, 50%);
  $duration: .48s;
  $x1: $duration;
  $x2: $duration * 2;
  $x3: $duration * 3;
  $x4: $duration * 4;
  $x5: $duration * 5;

  $perspective: 512px;

  .dot-loader {
    display: inline-block;

    @include animate($x1 both) {
      from {
        opacity: 0;
      }
    }

    span {
      display: block;
      position: relative;
      width: $box-size;
      height: $box-size;
    }

    b {
      position: absolute;
      top: 0;
      left: 0;
      display: block;
    }

    &._circle {
      span {
        @include animate($x3 linear infinite) {
          to {
            transform: rotate(360deg);
          }
        }
      }

      b:nth-child(1) {
        width: $content-size;
        height: $content-size;
        border: solid $color $border-size;
        border-radius: $radius-size;
        border-right-color: transparent;

        @include animate($x2 infinite) {
          to {
            transform: rotate(360deg);
          }
        }
      }
    }

    &._flip {
      b {
        background-color: $color;
      }

      b:nth-child(1) {
        width: 100%;
        height: 100%;
        perspective: $perspective;
        @include animate($x2 linear infinite) {
          50% {
            transform: rotateX(180deg);
          }
          100% {
            transform: rotateX(180deg) rotateY(180deg);
          }
        }
      }
    }

    &._flip9 {
      b {
        &:nth-child(1),
        &:nth-child(2),
        &:nth-child(3),
        &:nth-child(4),
        &:nth-child(5),
        &:nth-child(6),
        &:nth-child(7),
        &:nth-child(8),
        &:nth-child(9) {
          width: 33.33%;
          height: 33.33%;
          background-color: $color;
          perspective: $perspective;
          @include animate($x5 both infinite) {
            0% {
              transform: scale(1);
            }
            100% {
              transform: scale(1) rotateX(-180deg) rotateY(180deg);
            }
          }
        }

        &:nth-child(2),
        &:nth-child(5),
        &:nth-child(8) {
          left: 33.33%;
        }

        &:nth-child(3),
        &:nth-child(6),
        &:nth-child(9) {
          left: 66.66%;
        }

        &:nth-child(4),
        &:nth-child(5),
        &:nth-child(6) {
          top: 33.33%;
        }

        &:nth-child(7),
        &:nth-child(8),
        &:nth-child(9) {
          top: 66.66%;
        }

        &:nth-child(6),
        &:nth-child(8) {
          animation-delay: $x1;
        }

        &:nth-child(3),
        &:nth-child(5),
        &:nth-child(7) {
          animation-delay: $x2;
        }

        &:nth-child(2),
        &:nth-child(4) {
          animation-delay: $x3;
        }

        &:nth-child(1) {
          animation-delay: $x4;
        }
      }
    }

    &._bar {
      b {
        &:nth-child(1),
        &:nth-child(2),
        &:nth-child(3),
        &:nth-child(4) {
          width: 25%;
          height: 100%;
          background-color: $color;
          transform: scaleX(0.8) scaleY(0.5);
          @include animate($x2 infinite) {
            50% {
              transform: scaleX(0.96) scaleY(0.66);
            }
          }
        }

        &:nth-child(2) {
          left: 25%;
          animation-delay: $x1/4;
        }

        &:nth-child(3) {
          left: 50%;
          animation-delay: $x2/4;
        }

        &:nth-child(4) {
          left: 75%;
          animation-delay: $x3/4;
        }
      }
    }
  }
}